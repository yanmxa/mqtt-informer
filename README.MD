# MQTT Informer

## Description
This is a simple MQTT client that can be used to publish messages to a broker and subscribe to topics.


## Send resource from agent apiserver to broker
- List the manager secret
```json
{
  "type": "list.v1.secrets.",
  "id": "1",
  "source": "agent",
  "payload": "eyJuYW1lc3BhY2UiOiJkZWZhdWx0In0="
}
```
manager list response
```json
{
  "type": "response.list.v1.secrets.",
  "id": "1",
  "source": "manager",
  "payload": "eyJvYmplY3RzIjp7ImFwaVZlcnNpb24iOiJ2MSIsIml0ZW1zIjpbeyJhcGlWZXJzaW9uIjoidjEiLCJkYXRhIjp7ImNhLmNydCI6IkxTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVU12YWtORFFXVmhaMEYzU1VKQlowbENRVVJCVGtKbmEzRm9hMmxIT1hjd1FrRlJjMFpCUkVGV1RWSk5kMFZSV1VSV1VWRkVSWGR3Y21SWFNtd0tZMjAxYkdSSFZucE5RalJZUkZSSmVrMUVXWGxOUkVsNlRYcFpNRTR4YjFoRVZFMTZUVVJaZUU1NlNYcE5lbGt3VGpGdmQwWlVSVlJOUWtWSFFURlZSUXBCZUUxTFlUTldhVnBZU25WYVdGSnNZM3BEUTBGVFNYZEVVVmxLUzI5YVNXaDJZMDVCVVVWQ1FsRkJSR2RuUlZCQlJFTkRRVkZ2UTJkblJVSkJTalZGQ2tSdGJVa3pka1JIYlcxeUt5czRRWFJvYldRMmVFOW1lRXM0Y2tKSk5FcGpVbnB1YTBKQlRGZHlVM1YxTXpCdGNtZGxhM0UxWlVVeWRIRnRjU3RHYW5RS1VUUndTakJxYlU5WUsyMUVRVnBJZWxGUFl6aHFkM1JZY0V0TlYzUjZlWFJGTDFoMlpFbGhXRzlJYnpObllrUTVUR3hzZEVWNWFqaFNPVEZYVkd0MVJncEJObFphUjJ0U2QwMHhlVXBDUkdKNFYybzVRekZpTW1SaEwxQk5WM1l3Y1VVMFkyOTJNRGxPU0Rrd1puaGFWMlZ0T0Zab1VVMUxVelZMYVhSTVNHUjNDak5zYzNCVFMwNDFNbFl5UlZCcVFYaEJkVmR5YUVoRU9GcERkRzE2Um5oblYwRkdUMGx2V0ROUVV5OVNVM293WldwcGNFWjNRVk0wUWprMVUxRnFSbXNLTjBGbVZteG1UV0pWSzFCRWJ6VXdUMFJuZDBWTE9IUjFWRzFOT1VoRFowcFRUbXhrVFRSUU9FNVpTRkZtTkVKSmFuZHdlR3hSWmt0UGNVZHpRMFl5Ymdwd2NubE9XVk5GYkdsaFZFNW5ZbEJuTHpkTlEwRjNSVUZCWVU1YVRVWmpkMFJuV1VSV1VqQlFRVkZJTDBKQlVVUkJaMHRyVFVFNFIwRXhWV1JGZDBWQ0NpOTNVVVpOUVUxQ1FXWTRkMGhSV1VSV1VqQlBRa0paUlVaQ1ZpOWhVVFpUUkRkdVZGbzVUSEpCYkZacWJFSkdSemh6WVRoTlFsVkhRVEZWWkVWUlVVOEtUVUY1UTBOdGRERlpiVlo1WW0xV01GcFlUWGRFVVZsS1MyOWFTV2gyWTA1QlVVVk1RbEZCUkdkblJVSkJTV0oyV0U5c05VNWtRblZoU2xSVWJIUmtPQXAyTlVwbk1FNXBRemhLUVhaUWJHWmFVRWt3UTFwRmJUSnZhVE5ZYlhOQlFXUnBaRE5LWldadmIyOXJWbFZuVEZoSmRpdGhZM1ZqWWxWVFVteHBMMGx5Q2tkdU5tRkNVRFJQVWtWeFNsSlZTRW8yUVZwaE5FNUViazQyUWtsMWJrUlhiR1p1VVZOQlptNXhSelE0U25KMkwxbFJNemhMTms4ME4xcFdhSGxrZEc0S1QzUTBjWGMwWVRWMlQzWmlOWGhNUTNKQ05HVnZaVUZ5TjBSRlExVlZVM2czYnpWVlFVdHVaVzExWWsxNmIyNDBXRkZpVDFoaGRHNUljMlJyYnpBMVZBcHhPVlIyZVdSUlV6aERXbTlFT1cxTWFXYzROMFpKUms5MEwwWkJLMDAxUTBkSFUweG1XRmcwY1dWRWVUazBjelJXZFdzdlNFbFZOVTg1T1ZGcGNIVk1DamhZUVhod1ZEWm1aRlpPTlVOcU9WTXJSVWhyUzBkVFFrbGhjMDlWWlROUmFUSkpOa05EVGpWdlVpdFNZVVJRV2paNmIwVXJTMmgyUWtrdk5ubDNhMGNLVEhORlBRb3RMUzB0TFVWT1JDQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENnPT0iLCJuYW1lc3BhY2UiOiJaR1ZtWVhWc2RBPT0iLCJ0b2tlbiI6IlpYbEthR0pIWTJsUGFVcFRWWHBKTVU1cFNYTkpiWFJ3V2tOSk5rbHROVmxXUkU1VFZUQkdNR1ZGT1ZwT1J6QXhaVzFhVTA0emJEQlViSEJ3VDFoT2VGVXlOREJQUkdST1ZsWmpOVlpGTldGV1IyZzBXSHBuYVdaUkxtVjVTbkJqTTAxcFQybEtjbVJYU214amJUVnNaRWRXZWt3elRteGpibHB3V1RKV2FGa3lUblprVnpVd1NXbDNhV0V6Vm1sYVdFcDFXbGhTYkdONU5YQmllVGw2V2xoS01tRlhUbXhaVjA1cVlqTldkV1JET1hWWlZ6RnNZek5DYUZreVZXbFBhVXByV2xkYWFHUlhlREJKYVhkcFlUTldhVnBZU25WYVdGSnNZM2sxY0dKNU9YcGFXRW95WVZkT2JGbFhUbXBpTTFaMVpFTTVlbHBYVG5sYVdGRjFZbTFHZEZwVFNUWkpiVkpzV20xR01XSklVWFJrUnpseVdsYzBkRTVZU21sT1IxRnBURU5LY21SWFNteGpiVFZzWkVkV2VreHRiSFpNTTA1c1kyNWFjRmt5Vm1oWk1rNTJaRmMxTUV3elRteGpibHB3V1RKVmRGbFhUbXBpTTFaMVpFTTFkVmxYTVd4SmFtOXBXa2RXYlZsWVZuTmtRMGx6U1cxME1WbHRWbmxpYlZZd1dsaE5kV0ZYT0haak1sWjVaRzFzYWxwWFJtcFpNamt4WW01UmRtTXlWbmxrYld4cVdsTXhhRmt5VG5aa1Z6VXdURzVXY0ZwRFNUWkpiVnBwVFZSck0wMUVZM2RNVkd0M1drUkZkRTVIVFhkYWFURnBUbGROZUV4VVFUVlBWRkpzVGxkUmVFMUhUVFZOYVVselNXNU9NVmxwU1RaSmJrNDFZek5TYkdKVWNIcGFXRW95WVZkT2JGbFhUbXBpTTFaMVpFUndhMXBYV21oa1YzZ3dUMjFTYkZwdFJqRmlTRkZwWmxFdVNFRk1iRkIyYkhOdWFWbEJiSFYwUmt4cGRFZFFXVGhPYmtsU1FVWmFWVkUwVlVoc2JFeDFTM3BHTFhCd09GQnNXRXMxVm5GalZXUlplV3RqWm5kcFpHeHNlVEkxYWxwbFNGSldaMUU1V0hRMFRGTnNXa3g0UTBOTU9VcFJaMUoyU1VwZldIVkZlV0paYmtaMFgxazVORWh0Wm5SVFdXcHNUek4yYmpZdE1EUllRV1Y0VTJwRGRGTmphbTVWTUdkUFozUlJaUzFKVWtwaE9GaElVMHRQYmtWNk1EUlRaWGN6Wlc5alVGOVZaemh5YWtremRFSXhXbFIwTWtsSlZYbFBiakpaUXpSNmJGOW1lbE14Y1hCTmR6Rm9WVkJqY2xod1VFcHZPR3RmZGs1NExURTNSakJDUkdsRlJIRmthamwyZWpKNVgwdzViMDVFUW1oM1VVNDJPRmhhWDNkcWFrVnphVFp6VDJGd2RrUlBWbEpwTVVreFlXVk1VRlJ5VUV4ZmF6a3hia2xxWlROQ2FGTm9WVVY1V2twVFVsWkxPRXhzT0Vkd1UyZE1ObFJYV21OWFRWUkRXV3czZFhkVFgwbENTMGxsV25WUiJ9LCJraW5kIjoiU2VjcmV0IiwibWV0YWRhdGEiOnsiYW5ub3RhdGlvbnMiOnsia3ViZXJuZXRlcy5pby9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRlZmF1bHQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2UtYWNjb3VudC51aWQiOiJmYjE5NzA3MC05MGQxLTRjMGYtYjVjMS0wOTk0ZTVkMTBjOTIifSwiY3JlYXRpb25UaW1lc3RhbXAiOiIyMDIzLTA2LTIwVDIzOjM3OjA3WiIsIm1hbmFnZWRGaWVsZHMiOlt7ImFwaVZlcnNpb24iOiJ2MSIsImZpZWxkc1R5cGUiOiJGaWVsZHNWMSIsImZpZWxkc1YxIjp7ImY6ZGF0YSI6eyIuIjp7fSwiZjpjYS5jcnQiOnt9LCJmOm5hbWVzcGFjZSI6e30sImY6dG9rZW4iOnt9fSwiZjptZXRhZGF0YSI6eyJmOmFubm90YXRpb25zIjp7Ii4iOnt9LCJmOmt1YmVybmV0ZXMuaW8vc2VydmljZS1hY2NvdW50Lm5hbWUiOnt9LCJmOmt1YmVybmV0ZXMuaW8vc2VydmljZS1hY2NvdW50LnVpZCI6e319fSwiZjp0eXBlIjp7fX0sIm1hbmFnZXIiOiJrdWJlLWNvbnRyb2xsZXItbWFuYWdlciIsIm9wZXJhdGlvbiI6IlVwZGF0ZSIsInRpbWUiOiIyMDIzLTA2LTIwVDIzOjM3OjA3WiJ9XSwibmFtZSI6ImRlZmF1bHQtdG9rZW4tNXJiNGQiLCJuYW1lc3BhY2UiOiJkZWZhdWx0IiwicmVzb3VyY2VWZXJzaW9uIjoiMzk4IiwidWlkIjoiNDhhYWM5NDItNGQyOC00NTZkLTgzZDgtOThhYTRlYzkzZDc0In0sInR5cGUiOiJrdWJlcm5ldGVzLmlvL3NlcnZpY2UtYWNjb3VudC10b2tlbiJ9XSwia2luZCI6IlNlY3JldExpc3QiLCJtZXRhZGF0YSI6eyJyZXNvdXJjZVZlcnNpb24iOiIzNTYxIn19LCJlbmRPZkxpc3QiOnRydWV9"
}
```
- Watch the manager secret
```json
{
  "type": "watch.v1.secrets.",
  "id": "1",
  "source": "agent",
  "payload": "eyJuYW1lc3BhY2UiOiJkZWZhdWx0In0="
}
```
manager watch response
```json
{
  "type": "response.watch.v1.secrets.",
  "id": "2",
  "source": "manager",
  "payload": "eyJ0eXBlIjoiQURERUQiLCJvYmplY3QiOnsiYXBpVmVyc2lvbiI6InYxIiwiZGF0YSI6eyJjYS5jcnQiOiJMUzB0TFMxQ1JVZEpUaUJEUlZKVVNVWkpRMEZVUlMwdExTMHRDazFKU1VNdmFrTkRRV1ZoWjBGM1NVSkJaMGxDUVVSQlRrSm5hM0ZvYTJsSE9YY3dRa0ZSYzBaQlJFRldUVkpOZDBWUldVUldVVkZFUlhkd2NtUlhTbXdLWTIwMWJHUkhWbnBOUWpSWVJGUkplazFFV1hsTlJFbDZUWHBaTUU0eGIxaEVWRTE2VFVSWmVFNTZTWHBOZWxrd1RqRnZkMFpVUlZSTlFrVkhRVEZWUlFwQmVFMUxZVE5XYVZwWVNuVmFXRkpzWTNwRFEwRlRTWGRFVVZsS1MyOWFTV2gyWTA1QlVVVkNRbEZCUkdkblJWQkJSRU5EUVZGdlEyZG5SVUpCU2pWRkNrUnRiVWt6ZGtSSGJXMXlLeXM0UVhSb2JXUTJlRTltZUVzNGNrSkpORXBqVW5wdWEwSkJURmR5VTNWMU16QnRjbWRsYTNFMVpVVXlkSEZ0Y1N0R2FuUUtVVFJ3U2pCcWJVOVlLMjFFUVZwSWVsRlBZemhxZDNSWWNFdE5WM1I2ZVhSRkwxaDJaRWxoV0c5SWJ6Tm5Za1E1VEd4c2RFVjVhamhTT1RGWFZHdDFSZ3BCTmxaYVIydFNkMDB4ZVVwQ1JHSjRWMm81UXpGaU1tUmhMMUJOVjNZd2NVVTBZMjkyTURsT1NEa3dabmhhVjJWdE9GWm9VVTFMVXpWTGFYUk1TR1IzQ2pOc2MzQlRTMDQxTWxZeVJWQnFRWGhCZFZkeWFFaEVPRnBEZEcxNlJuaG5WMEZHVDBsdldETlFVeTlTVTNvd1pXcHBjRVozUVZNMFFqazFVMUZxUm1zS04wRm1WbXhtVFdKVksxQkVielV3VDBSbmQwVkxPSFIxVkcxTk9VaERaMHBUVG14a1RUUlFPRTVaU0ZGbU5FSkphbmR3ZUd4UlprdFBjVWR6UTBZeWJncHdjbmxPV1ZORmJHbGhWRTVuWWxCbkx6ZE5RMEYzUlVGQllVNWFUVVpqZDBSbldVUldVakJRUVZGSUwwSkJVVVJCWjB0clRVRTRSMEV4VldSRmQwVkNDaTkzVVVaTlFVMUNRV1k0ZDBoUldVUldVakJQUWtKWlJVWkNWaTloVVRaVFJEZHVWRm81VEhKQmJGWnFiRUpHUnpoellUaE5RbFZIUVRGVlpFVlJVVThLVFVGNVEwTnRkREZaYlZaNVltMVdNRnBZVFhkRVVWbEtTMjlhU1doMlkwNUJVVVZNUWxGQlJHZG5SVUpCU1dKMldFOXNOVTVrUW5WaFNsUlViSFJrT0FwMk5VcG5NRTVwUXpoS1FYWlFiR1phVUVrd1ExcEZiVEp2YVROWWJYTkJRV1JwWkROS1pXWnZiMjlyVmxWblRGaEpkaXRoWTNWallsVlRVbXhwTDBseUNrZHVObUZDVURSUFVrVnhTbEpWU0VvMlFWcGhORTVFYms0MlFrbDFia1JYYkdadVVWTkJabTV4UnpRNFNuSjJMMWxSTXpoTE5rODBOMXBXYUhsa2RHNEtUM1EwY1hjMFlUVjJUM1ppTlhoTVEzSkNOR1Z2WlVGeU4wUkZRMVZWVTNnM2J6VlZRVXR1WlcxMVlrMTZiMjQwV0ZGaVQxaGhkRzVJYzJScmJ6QTFWQXB4T1ZSMmVXUlJVemhEV205RU9XMU1hV2M0TjBaSlJrOTBMMFpCSzAwMVEwZEhVMHhtV0ZnMGNXVkVlVGswY3pSV2RXc3ZTRWxWTlU4NU9WRnBjSFZNQ2poWVFYaHdWRFptWkZaT05VTnFPVk1yUlVoclMwZFRRa2xoYzA5VlpUTlJhVEpKTmtORFRqVnZVaXRTWVVSUVdqWjZiMFVyUzJoMlFra3ZObmwzYTBjS1RITkZQUW90TFMwdExVVk9SQ0JEUlZKVVNVWkpRMEZVUlMwdExTMHRDZz09IiwibmFtZXNwYWNlIjoiWkdWbVlYVnNkQT09IiwidG9rZW4iOiJaWGxLYUdKSFkybFBhVXBUVlhwSk1VNXBTWE5KYlhSd1drTkpOa2x0TlZsV1JFNVRWVEJHTUdWRk9WcE9SekF4WlcxYVUwNHpiREJVYkhCd1QxaE9lRlV5TkRCUFJHUk9WbFpqTlZaRk5XRldSMmcwV0hwbmFXWlJMbVY1U25Cak0wMXBUMmxLY21SWFNteGpiVFZzWkVkV2Vrd3pUbXhqYmxwd1dUSldhRmt5VG5aa1Z6VXdTV2wzYVdFelZtbGFXRXAxV2xoU2JHTjVOWEJpZVRsNldsaEtNbUZYVG14WlYwNXFZak5XZFdSRE9YVlpWekZzWXpOQ2FGa3lWV2xQYVVwcldsZGFhR1JYZURCSmFYZHBZVE5XYVZwWVNuVmFXRkpzWTNrMWNHSjVPWHBhV0VveVlWZE9iRmxYVG1waU0xWjFaRU01ZWxwWFRubGFXRkYxWW0xR2RGcFRTVFpKYlZKc1dtMUdNV0pJVVhSa1J6bHlXbGMwZEU1WVNtbE9SMUZwVEVOS2NtUlhTbXhqYlRWc1pFZFdla3h0YkhaTU0wNXNZMjVhY0ZreVZtaFpNazUyWkZjMU1Fd3pUbXhqYmxwd1dUSlZkRmxYVG1waU0xWjFaRU0xZFZsWE1XeEphbTlwV2tkV2JWbFlWbk5rUTBselNXMTBNVmx0Vm5saWJWWXdXbGhOZFdGWE9IWmpNbFo1Wkcxc2FscFhSbXBaTWpreFltNVJkbU15Vm5sa2JXeHFXbE14YUZreVRuWmtWelV3VEc1V2NGcERTVFpKYlZwcFRWUnJNMDFFWTNkTVZHdDNXa1JGZEU1SFRYZGFhVEZwVGxkTmVFeFVRVFZQVkZKc1RsZFJlRTFIVFRWTmFVbHpTVzVPTVZscFNUWkpiazQxWXpOU2JHSlVjSHBhV0VveVlWZE9iRmxYVG1waU0xWjFaRVJ3YTFwWFdtaGtWM2d3VDIxU2JGcHRSakZpU0ZGcFpsRXVTRUZNYkZCMmJITnVhVmxCYkhWMFJreHBkRWRRV1RoT2JrbFNRVVphVlZFMFZVaHNiRXgxUzNwR0xYQndPRkJzV0VzMVZuRmpWV1JaZVd0alpuZHBaR3hzZVRJMWFscGxTRkpXWjFFNVdIUTBURk5zV2t4NFEwTk1PVXBSWjFKMlNVcGZXSFZGZVdKWmJrWjBYMWs1TkVodFpuUlRXV3BzVHpOMmJqWXRNRFJZUVdWNFUycERkRk5qYW01Vk1HZFBaM1JSWlMxSlVrcGhPRmhJVTB0UGJrVjZNRFJUWlhjelpXOWpVRjlWWnpoeWFra3pkRUl4V2xSME1rbEpWWGxQYmpKWlF6UjZiRjltZWxNeGNYQk5kekZvVlZCamNsaHdVRXB2T0d0ZmRrNTRMVEUzUmpCQ1JHbEZSSEZrYWpsMmVqSjVYMHc1YjA1RVFtaDNVVTQyT0ZoYVgzZHFha1Z6YVRaelQyRndka1JQVmxKcE1Va3hZV1ZNVUZSeVVFeGZhemt4YmtscVpUTkNhRk5vVlVWNVdrcFRVbFpMT0V4c09FZHdVMmRNTmxSWFdtTlhUVlJEV1d3M2RYZFRYMGxDUzBsbFduVlIifSwia2luZCI6IlNlY3JldCIsIm1ldGFkYXRhIjp7ImFubm90YXRpb25zIjp7Imt1YmVybmV0ZXMuaW8vc2VydmljZS1hY2NvdW50Lm5hbWUiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlLWFjY291bnQudWlkIjoiZmIxOTcwNzAtOTBkMS00YzBmLWI1YzEtMDk5NGU1ZDEwYzkyIn0sImNyZWF0aW9uVGltZXN0YW1wIjoiMjAyMy0wNi0yMFQyMzozNzowN1oiLCJtYW5hZ2VkRmllbGRzIjpbeyJhcGlWZXJzaW9uIjoidjEiLCJmaWVsZHNUeXBlIjoiRmllbGRzVjEiLCJmaWVsZHNWMSI6eyJmOmRhdGEiOnsiLiI6e30sImY6Y2EuY3J0Ijp7fSwiZjpuYW1lc3BhY2UiOnt9LCJmOnRva2VuIjp7fX0sImY6bWV0YWRhdGEiOnsiZjphbm5vdGF0aW9ucyI6eyIuIjp7fSwiZjprdWJlcm5ldGVzLmlvL3NlcnZpY2UtYWNjb3VudC5uYW1lIjp7fSwiZjprdWJlcm5ldGVzLmlvL3NlcnZpY2UtYWNjb3VudC51aWQiOnt9fX0sImY6dHlwZSI6e319LCJtYW5hZ2VyIjoia3ViZS1jb250cm9sbGVyLW1hbmFnZXIiLCJvcGVyYXRpb24iOiJVcGRhdGUiLCJ0aW1lIjoiMjAyMy0wNi0yMFQyMzozNzowN1oifV0sIm5hbWUiOiJkZWZhdWx0LXRva2VuLTVyYjRkIiwibmFtZXNwYWNlIjoiZGVmYXVsdCIsInJlc291cmNlVmVyc2lvbiI6IjM5OCIsInVpZCI6IjQ4YWFjOTQyLTRkMjgtNDU2ZC04M2Q4LTk4YWE0ZWM5M2Q3NCJ9LCJ0eXBlIjoia3ViZXJuZXRlcy5pby9zZXJ2aWNlLWFjY291bnQtdG9rZW4ifX0="
}
```
create a secret on manager `kubectl create secret generic my-secret --from-literal=username=admin --from-literal=password=secretpassword`
manager watch response
```json
{
  "type": "response.watch.v1.secrets.",
  "id": "2",
  "source": "manager",
  "payload": "eyJ0eXBlIjoiQURERUQiLCJvYmplY3QiOnsiYXBpVmVyc2lvbiI6InYxIiwiZGF0YSI6eyJwYXNzd29yZCI6ImMyVmpjbVYwY0dGemMzZHZjbVE9IiwidXNlcm5hbWUiOiJZV1J0YVc0PSJ9LCJraW5kIjoiU2VjcmV0IiwibWV0YWRhdGEiOnsiY3JlYXRpb25UaW1lc3RhbXAiOiIyMDIzLTA2LTIxVDAwOjEwOjI1WiIsIm1hbmFnZWRGaWVsZHMiOlt7ImFwaVZlcnNpb24iOiJ2MSIsImZpZWxkc1R5cGUiOiJGaWVsZHNWMSIsImZpZWxkc1YxIjp7ImY6ZGF0YSI6eyIuIjp7fSwiZjpwYXNzd29yZCI6e30sImY6dXNlcm5hbWUiOnt9fSwiZjp0eXBlIjp7fX0sIm1hbmFnZXIiOiJrdWJlY3RsLWNyZWF0ZSIsIm9wZXJhdGlvbiI6IlVwZGF0ZSIsInRpbWUiOiIyMDIzLTA2LTIxVDAwOjEwOjI1WiJ9XSwibmFtZSI6Im15LXNlY3JldCIsIm5hbWVzcGFjZSI6ImRlZmF1bHQiLCJyZXNvdXJjZVZlcnNpb24iOiIzOTE0IiwidWlkIjoiNGZlMWRhY2UtMjA2OS00ZTlkLWIxOWMtOWE0ZjZhYjI2YzVjIn0sInR5cGUiOiJPcGFxdWUifX0="
}
```
delete the secret on manager `kubectl delete secret my-secret`
manage watch resposne 
```json
{
  "type": "response.watch.v1.secrets.",
  "id": "2",
  "source": "manager",
  "payload": "eyJ0eXBlIjoiREVMRVRFRCIsIm9iamVjdCI6eyJhcGlWZXJzaW9uIjoidjEiLCJkYXRhIjp7InBhc3N3b3JkIjoiYzJWamNtVjBjR0Z6YzNkdmNtUT0iLCJ1c2VybmFtZSI6IllXUnRhVzQ9In0sImtpbmQiOiJTZWNyZXQiLCJtZXRhZGF0YSI6eyJjcmVhdGlvblRpbWVzdGFtcCI6IjIwMjMtMDYtMjFUMDA6MTA6MjVaIiwibWFuYWdlZEZpZWxkcyI6W3siYXBpVmVyc2lvbiI6InYxIiwiZmllbGRzVHlwZSI6IkZpZWxkc1YxIiwiZmllbGRzVjEiOnsiZjpkYXRhIjp7Ii4iOnt9LCJmOnBhc3N3b3JkIjp7fSwiZjp1c2VybmFtZSI6e319LCJmOnR5cGUiOnt9fSwibWFuYWdlciI6Imt1YmVjdGwtY3JlYXRlIiwib3BlcmF0aW9uIjoiVXBkYXRlIiwidGltZSI6IjIwMjMtMDYtMjFUMDA6MTA6MjVaIn1dLCJuYW1lIjoibXktc2VjcmV0IiwibmFtZXNwYWNlIjoiZGVmYXVsdCIsInJlc291cmNlVmVyc2lvbiI6IjQwMDMiLCJ1aWQiOiI0ZmUxZGFjZS0yMDY5LTRlOWQtYjE5Yy05YTRmNmFiMjZjNWMifSwidHlwZSI6Ik9wYXF1ZSJ9fQ=="
}
```

## Receive resource from mqtt broker to apiserver
- List
```json
{
  "type": "response.list.v1.secrets.",
  "id": "1",
  "source": "manager",
  "payload": "eyJvYmplY3RzIjp7ImFwaVZlcnNpb24iOiJ2MSIsIml0ZW1zIjpbeyJhcGlWZXJzaW9uIjoidjEiLCJkYXRhIjp7ImNhLmNydCI6IkxTMHRMUzFDUlVkSlRpQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENrMUpTVU12YWtORFFXVmhaMEYzU1VKQlowbENRVVJCVGtKbmEzRm9hMmxIT1hjd1FrRlJjMFpCUkVGV1RWSk5kMFZSV1VSV1VWRkVSWGR3Y21SWFNtd0tZMjAxYkdSSFZucE5RalJZUkZSSmVrMUVXWGxOUkVFMFRWUkZlVTVzYjFoRVZFMTZUVVJaZUU1NlFUUk5WRVY1VG14dmQwWlVSVlJOUWtWSFFURlZSUXBCZUUxTFlUTldhVnBZU25WYVdGSnNZM3BEUTBGVFNYZEVVVmxLUzI5YVNXaDJZMDVCVVVWQ1FsRkJSR2RuUlZCQlJFTkRRVkZ2UTJkblJVSkJURTAxQ2tSWWN6VjNhUzk1V0dGbE1teExjRkpWZEhkeU1ETkVkRTl1U2taU1duTlBVMWRQVERSVmRVSkRjamhMZGlzMk5rbEtMeXRoVlhkMFNFZFlTMEkyTWtFS1RESkNkRzV2V0VWVFZXaEJSRzk0T1ZSclEyMTVjV2RhVjFrd2N6TlpXWFZsTUdKd01sSnNWRGh0VDNSMVZtMVpZVk01ZGt0MVExTlBlRUpFVGpGMlR3cHRUR2h3TjNSRVdWcDRSV1ZxWjNWaGJTdFJVbUpFVW1KTGFpOVVVR0prTjJsdGFtZDBTM04yTVVoMU16VXhVRzlXYTBOVFFuVjZTR05YYW1GU2JtZGhDbVoyS3pRcldWUktNMHd6TVVwQlJtdENWMmQ1UWpWemQycGFiVUpyWlVsSk4ycE5UVlJ2T0VJNUwxSmFXVEpoUTFVcmNreDBja2Q1ZFhGSlFVWnBjMWNLVVRVMGRYSk5lRzF6YUZKMFZERndUblpOY2sxRk5VNTBlV2xEYkU1MWRFdFBhakJvVWxaelRXNHpkVzlqTmk5cldta3lVbFI0TUdWMWVrTXlUR2hxTWdwaEwyVXhka3hZTUZkclJrOXhXbXBXZDI4NFEwRjNSVUZCWVU1YVRVWmpkMFJuV1VSV1VqQlFRVkZJTDBKQlVVUkJaMHRyVFVFNFIwRXhWV1JGZDBWQ0NpOTNVVVpOUVUxQ1FXWTRkMGhSV1VSV1VqQlBRa0paUlVaTGRYcGpWR1pEUm00emRtMXNVbmwzUTFKdU5rRmlNM1puSzFCTlFsVkhRVEZWWkVWUlVVOEtUVUY1UTBOdGRERlpiVlo1WW0xV01GcFlUWGRFVVZsS1MyOWFTV2gyWTA1QlVVVk1RbEZCUkdkblJVSkJTVWRNT1ZoWmRHcFVZbWRDZHpKUlkyMUtRZ3B0VkZwMk1tWkNkM0JCVVVKSlpVazFUelZLUW1GMlMzUkJPWEphVUdka1pqQjNVelJRVDJGc1dGUm5ZVFp2WXpGeU4zYzRLMWd5Um1rMWJsTllPRlZHQ21ReGJsUjRXblZ1Y2sxSlVVWndPR296ZDB0NVoyZFlaMU56U2s5b1FXbHNUREJXUWxac1kySXdZbkpWWmpsT1lVTkNjREkwTlZGTFJUZFZkelIwUVM4S2NVcG9Ra1F3VUhRMU5HeHNZVkZvY21ScWJVNVVOMHhZUTJzMVVEUlllVFpyWXl0aFZWTlRUemxVYWtZM1ZFNTVNRkl3VVhWb01ESk9hRTlrUVRKNVFncENVMGs1Y0hZNWJVd3daV3hYVjNwVEwwaHhUWGxNVEZORFRrRmxSbVJrY0ZWUVVHMHhlR2RhU21zNE9YRnNjU3RFYzJSeGFFbDRUa3RhYnpkc2FGTndDa2hwZFd4MEsyMWFTa2R1YkdaWVZ6SmxTa1pSWWsxalNESlphbmxTWlRSeFpXVmlka2N4UlZWeWFWaEVVVVpzUWpGeVRVUndPRzlPUzJkMWFtdzVlVUVLWWtSWlBRb3RMUzB0TFVWT1JDQkRSVkpVU1VaSlEwRlVSUzB0TFMwdENnPT0iLCJuYW1lc3BhY2UiOiJaR1ZtWVhWc2RBPT0iLCJ0b2tlbiI6IlpYbEthR0pIWTJsUGFVcFRWWHBKTVU1cFNYTkpiWFJ3V2tOSk5rbHNjRXRUUkVrMVlXeFdjbU13U2pKUFIzaHlVekZzV0ZneWJ6Tk5Nbmd3WW01dk1tTnJSWHBpTW1oYVVsZHdNVmRYYXpWV01UbHZXbTVOYVdaUkxtVjVTbkJqTTAxcFQybEtjbVJYU214amJUVnNaRWRXZWt3elRteGpibHB3V1RKV2FGa3lUblprVnpVd1NXbDNhV0V6Vm1sYVdFcDFXbGhTYkdONU5YQmllVGw2V2xoS01tRlhUbXhaVjA1cVlqTldkV1JET1hWWlZ6RnNZek5DYUZreVZXbFBhVXByV2xkYWFHUlhlREJKYVhkcFlUTldhVnBZU25WYVdGSnNZM2sxY0dKNU9YcGFXRW95WVZkT2JGbFhUbXBpTTFaMVpFTTVlbHBYVG5sYVdGRjFZbTFHZEZwVFNUWkpiVkpzV20xR01XSklVWFJrUnpseVdsYzBkRm95V20xYVJHdHBURU5LY21SWFNteGpiVFZzWkVkV2VreHRiSFpNTTA1c1kyNWFjRmt5Vm1oWk1rNTJaRmMxTUV3elRteGpibHB3V1RKVmRGbFhUbXBpTTFaMVpFTTFkVmxYTVd4SmFtOXBXa2RXYlZsWVZuTmtRMGx6U1cxME1WbHRWbmxpYlZZd1dsaE5kV0ZYT0haak1sWjVaRzFzYWxwWFJtcFpNamt4WW01UmRtTXlWbmxrYld4cVdsTXhhRmt5VG5aa1Z6VXdURzVXY0ZwRFNUWkphbEUxV21wR2FGbFVaRzFNVkZreFRtcEpkRTVFVFRST1V6Rm9UMFJKTUV4VVdUSk9SR2hzV2xSWk5GbHFXbXRhVTBselNXNU9NVmxwU1RaSmJrNDFZek5TYkdKVWNIcGFXRW95WVZkT2JGbFhUbXBpTTFaMVpFUndhMXBYV21oa1YzZ3dUMjFTYkZwdFJqRmlTRkZwWmxFdWF6aFFTV2hzT1ZOQmN6ZEZWelJTZEV0aWNuRk9WSGhQY2xSSVFVNXZWQzFmWkZFdGVESnJjR2wxYVdGVlQyRlVOM1ZJYnpObWFucFRSRlk1WnpWNVIzZElORzFNUlZnNE5FeG9UMEpVYTFBM1ZreGxSekpaZFMwM0xUUkpWV3cxVDJSbWJrTmxlbU4wYURad1JqaERVRU5RYWs4M1NUTkdaRzVGVkUxRGMzSkNPRE5NVTNwV2RVcHJZWFJSY201a1pIZEZXakJLV1RFdFFrVnVOSFZOYjIxbVVVNU9UbDlCV1RWUWMxTnVORkJrVW5CaVlYcFpjVUkxU3pnM1ZqQlFTMUV0V2t3M1VrMURaa2hLYVhscFREQk5TV1pDUmkxRFJuY3dOVUptY2sxRmVXcFNVVzkyYVVaVlpXbE1lRFpHZWxkTlpsTnhUMXA0VEdKbmRHVnJMVEZoVW5WdWVETXpkRGhvYkVKWVRVWkhkV1ppVVdsdlpYSlNaVUZwU2tWMWRGRnVaWE41ZUhWcFNuaERaVTluU1RKVVlsUXlhbEZyTkV4c2R6TkZUblpoVmpCcVNteEphRTlJWTBOUk1EVXlORWxhUXpGbiJ9LCJraW5kIjoiU2VjcmV0IiwibWV0YWRhdGEiOnsiYW5ub3RhdGlvbnMiOnsia3ViZXJuZXRlcy5pby9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImRlZmF1bHQiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2UtYWNjb3VudC51aWQiOiI0OWYxYWE3Zi02NTYyLTQzODUtYTgyNC02NjQ4ZWU2OGI2ZGUifSwiY3JlYXRpb25UaW1lc3RhbXAiOiIyMDIzLTA2LTIwVDA4OjExOjQ4WiIsIm1hbmFnZWRGaWVsZHMiOlt7ImFwaVZlcnNpb24iOiJ2MSIsImZpZWxkc1R5cGUiOiJGaWVsZHNWMSIsImZpZWxkc1YxIjp7ImY6ZGF0YSI6eyIuIjp7fSwiZjpjYS5jcnQiOnt9LCJmOm5hbWVzcGFjZSI6e30sImY6dG9rZW4iOnt9fSwiZjptZXRhZGF0YSI6eyJmOmFubm90YXRpb25zIjp7Ii4iOnt9LCJmOmt1YmVybmV0ZXMuaW8vc2VydmljZS1hY2NvdW50Lm5hbWUiOnt9LCJmOmt1YmVybmV0ZXMuaW8vc2VydmljZS1hY2NvdW50LnVpZCI6e319fSwiZjp0eXBlIjp7fX0sIm1hbmFnZXIiOiJrdWJlLWNvbnRyb2xsZXItbWFuYWdlciIsIm9wZXJhdGlvbiI6IlVwZGF0ZSIsInRpbWUiOiIyMDIzLTA2LTIwVDA4OjExOjQ4WiJ9XSwibmFtZSI6ImRlZmF1bHQtdG9rZW4tZ2ZmZDkiLCJuYW1lc3BhY2UiOiJkZWZhdWx0IiwicmVzb3VyY2VWZXJzaW9uIjoiNDQ0IiwidWlkIjoiNTMwMDRjY2MtYThlZC00ZTVlLTk5NDYtYzUyZTgzOTAyYTYxIn0sInR5cGUiOiJrdWJlcm5ldGVzLmlvL3NlcnZpY2UtYWNjb3VudC10b2tlbiJ9XSwia2luZCI6IlNlY3JldExpc3QiLCJtZXRhZGF0YSI6eyJyZXNvdXJjZVZlcnNpb24iOiIzMDIwMyJ9fSwiZW5kT2ZMaXN0Ijp0cnVlfQ=="
}
```
- Add a secret named `my-secret`
```json
{
  "type": "response.watch.v1.secrets.",
  "id": "1",
  "source": "manager",
  "payload": "eyJ0eXBlIjoiQURERUQiLCJvYmplY3QiOnsiYXBpVmVyc2lvbiI6InYxIiwiZGF0YSI6eyJwYXNzd29yZCI6ImMyVmpjbVYwY0dGemMzZHZjbVE9IiwidXNlcm5hbWUiOiJZV1J0YVc0PSJ9LCJraW5kIjoiU2VjcmV0IiwibWV0YWRhdGEiOnsiY3JlYXRpb25UaW1lc3RhbXAiOiIyMDIzLTA2LTIwVDEzOjIxOjI1WiIsIm1hbmFnZWRGaWVsZHMiOlt7ImFwaVZlcnNpb24iOiJ2MSIsImZpZWxkc1R5cGUiOiJGaWVsZHNWMSIsImZpZWxkc1YxIjp7ImY6ZGF0YSI6eyIuIjp7fSwiZjpwYXNzd29yZCI6e30sImY6dXNlcm5hbWUiOnt9fSwiZjp0eXBlIjp7fX0sIm1hbmFnZXIiOiJrdWJlY3RsLWNyZWF0ZSIsIm9wZXJhdGlvbiI6IlVwZGF0ZSIsInRpbWUiOiIyMDIzLTA2LTIwVDEzOjIxOjI1WiJ9XSwibmFtZSI6Im15LXNlY3JldCIsIm5hbWVzcGFjZSI6ImRlZmF1bHQiLCJyZXNvdXJjZVZlcnNpb24iOiIzMTk0OCIsInVpZCI6IjhiMjFkZjAwLWY0MjYtNGIxMC1iMDczLWNmMjNiOTlmYTc3YyJ9LCJ0eXBlIjoiT3BhcXVlIn19"
}
```

- Delete the secret
```json
{
  "type": "response.watch.v1.secrets.",
  "id": "1",
  "source": "manager",
  "payload": "eyJ0eXBlIjoiREVMRVRFRCIsIm9iamVjdCI6eyJhcGlWZXJzaW9uIjoidjEiLCJkYXRhIjp7InBhc3N3b3JkIjoiYzJWamNtVjBjR0Z6YzNkdmNtUT0iLCJ1c2VybmFtZSI6IllXUnRhVzQ9In0sImtpbmQiOiJTZWNyZXQiLCJtZXRhZGF0YSI6eyJjcmVhdGlvblRpbWVzdGFtcCI6IjIwMjMtMDYtMjBUMTM6MjE6MjVaIiwibWFuYWdlZEZpZWxkcyI6W3siYXBpVmVyc2lvbiI6InYxIiwiZmllbGRzVHlwZSI6IkZpZWxkc1YxIiwiZmllbGRzVjEiOnsiZjpkYXRhIjp7Ii4iOnt9LCJmOnBhc3N3b3JkIjp7fSwiZjp1c2VybmFtZSI6e319LCJmOnR5cGUiOnt9fSwibWFuYWdlciI6Imt1YmVjdGwtY3JlYXRlIiwib3BlcmF0aW9uIjoiVXBkYXRlIiwidGltZSI6IjIwMjMtMDYtMjBUMTM6MjE6MjVaIn1dLCJuYW1lIjoibXktc2VjcmV0IiwibmFtZXNwYWNlIjoiZGVmYXVsdCIsInJlc291cmNlVmVyc2lvbiI6IjMyMDA1IiwidWlkIjoiOGIyMWRmMDAtZjQyNi00YjEwLWIwNzMtY2YyM2I5OWZhNzdjIn0sInR5cGUiOiJPcGFxdWUifX0="
}
```